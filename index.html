<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twoje Zaproszenie - Zdrapka</title>
    <style>
        /* Styl dla kontenera, aby utrzymać pozycjonowanie */
       #scratch-container {
    position: relative;
    /* Domyślne wymiary zostawiamy, JS je i tak nadpisze, ale są potrzebne */
    width: 300px; 
    height: 200px; 
    margin: 50px auto;
    
    /* DODAJEMY EFEKT ZŁOTEGO CIENIA */
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.7); /* Intensywny złoty cień */
    
    border-radius: 10px;
    overflow: hidden;
}

/* Reszta stylów pozostaje bez zmian */

        /* Styl dla obrazu, który ma być "zdrapany" */
        #scratchImage {
            display: block;
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }

        /* Styl dla płótna (warstwy do zdrapywania) */
        #scratchCanvas {
            position: absolute;
            top: 0;
            left: 0;
            cursor: pointer;
            border-radius: 10px;
        }
    </style>
</head>
<body>

    <h1 style="text-align: center; color: #333;">Odkryj niespodziankę!</h1>

    <div id="scratch-container">
        <img id="scratchImage" src="zaproszenie.png" alt="Zaproszenie" width="300" height="200" />
        
        <canvas id="scratchCanvas"></canvas>
    </div>
    
    <p style="text-align: center; margin-top: 20px; color: #555;">Zacznij klikać i przeciągać, aby zdrapać warstwę.</p>

 <script>
    document.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById('scratch-container');
        const canvas = document.getElementById('scratchCanvas');
        const ctx = canvas.getContext('2d');
        const imageToReveal = document.getElementById('scratchImage');

        // Flaga do sprawdzania, czy użytkownik "zdrapuje"
        let isScratching = false;

        // ----------------------------------------------------
        // NOWA LOGIKA ŁADOWANIA I SKALOWANIA OBRAZU
        // ----------------------------------------------------

        const image = new Image();
        image.src = imageToReveal.src; // Wczytaj obraz z tagu <img>

        image.onload = () => {
            // Ustawiamy wymiary canvas i kontenera na podstawie wymiarów załadowanego obrazu
            const WIDTH = image.width;
            const HEIGHT = image.height;

            canvas.width = WIDTH;
            canvas.height = HEIGHT;
            
            container.style.width = `${WIDTH}px`;
            container.style.height = `${HEIGHT}px`;

            // Rysujemy obraz (tylko w tagu <img>, nie w canvas)
            // Teraz możemy zainicjalizować warstwę zdrapki

            initializeScratchLayer(WIDTH, HEIGHT);
            
            // ... (Pozostałe funkcje takie jak startScratch, scratch, stopScratch pozostają bez zmian)
        };
        
        // ----------------------------------------------------
        // FUNKCJA INICJALIZUJĄCA "ZDRAPKĘ" Z NOWYMI PARAMETRAMI
        // ----------------------------------------------------

        function initializeScratchLayer(WIDTH, HEIGHT) {
            // Używamy koloru złotego!
            ctx.fillStyle = '#FFD700'; 
            ctx.fillRect(0, 0, WIDTH, HEIGHT);
            
            // Opcjonalnie: Dodaj tekst lub wzorek na warstwie
            ctx.font = '24px Arial'; // Zwiększamy czcionkę
            ctx.fillStyle = '#A88400'; // Ciemniejszy odcień złota dla tekstu
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle'; // Ustawienie bazowej linii tekstu na środek
            ctx.fillText('ZDRAP!', WIDTH / 2, HEIGHT / 2);

            // Konfiguracja "gumki"
            ctx.globalCompositeOperation = 'destination-out';
            ctx.lineWidth = 30; // Nieco szerszy pędzel
            ctx.lineJoin = 'round';
            ctx.lineCap = 'round';
        }
        
        // Funkcje obsługi zdarzeń (startScratch, scratch, stopScratch i getCoords) 
        // można zostawić bez zmian z poprzedniej wersji kodu, ponieważ 
        // działają poprawnie, niezależnie od wymiarów.

        // PAMIĘTAJ, aby przenieść wszystkie funkcje: getCoords, startScratch, scratch, stopScratch 
        // ORAZ podpięcie event listenerów (canvas.addEventListener...) do sekcji `<script>`.
        
    });
</script>
</body>
</html>

